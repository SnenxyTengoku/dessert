---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: wuzetka
description: sneexy's personal and opinionated kinoite image

# the base image to build on top of (FROM) and the version tag to use
base-image: ghcr.io/ublue-os/kinoite-main
image-version: 43 # latest is also supported if you want new updates ASAP

modules:
  # packages
  - from-file: packages/dnf.yml # base package selection
  - from-file: packages/flatpaks.yml # base default flatpaks
  - from-file: packages/wuzetka/dnf.yml # wuzetka package selection
  - from-file: packages/wuzetka/flatpaks.yml # wuzetka flatpak selection

  # pre-run
  - from-file: shared/files.yml # shared base filesystem
  - from-file: shared/scripts.yml # default scripts selection

  # wuzetka files
  - type: files
    files:
      - source: system/wuzetka
        destination: /

  # copy files and software from helper images
  - type: containerfile
    snippets:
      # -- catppuccin
      - COPY --from=ghcr.io/snenxytengoku/helper-catppuccin /artifacts/usr /usr
      - COPY --from=ghcr.io/snenxytengoku/helper-catppuccin /artifacts/etc /etc
      # -- cargo
      - COPY --from=ghcr.io/snenxytengoku/helper-cargo /artifacts/usr /usr
      # -- go
      #- COPY --from=ghcr.io/snenxytengoku/helper-go /artifacts/usr /usr
      # -- kde
      - COPY --from=ghcr.io/snenxytengoku/helper-kde /artifacts/usr /usr

  - type: script
    scripts:
      # customization
      - additions/sddm-astronaut-theme.sh
      # catppuccin
      - catppuccin/plasma.sh
      # ---
      - flavors/wuzetka.sh

  # post-run
  - from-file: shared/fonts.yml # fonts
  - from-file: shared/bling.yml # ublue bling selection
  - from-file: shared/systemd.yml # default systemd services

  - type: gschema-overrides
    include:
      - zz1-wuzetka.gschema.override

  - type: signing